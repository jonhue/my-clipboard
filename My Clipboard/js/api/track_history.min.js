function getDate(e){var t=new Date,i=t.getMonth()+1,s=t.getDate(),n=t.getHours(),o=t.getMinutes();n=(n+24)%24;var a="AM";if(0==n?n=12:n>12&&(n%=12,a="PM"),e)var r=t.getSeconds(),l=((""+i).length<2?"0":"")+i+"/"+((""+s).length<2?"0":"")+s+" - "+((""+n).length<2?"0":"")+n+":"+((""+o).length<2?"0":"")+o+":"+((""+r).length<2?"0":"")+r+"  "+a;else var l=((""+i).length<2?"0":"")+i+"/"+((""+s).length<2?"0":"")+s+" - "+((""+n).length<2?"0":"")+n+":"+((""+o).length<2?"0":"")+o+"  "+a;return l}function trackHistory(){if(document.hasFocus()){var e=Windows.ApplicationModel.DataTransfer.Clipboard.getContent();e.contains(Windows.ApplicationModel.DataTransfer.StandardDataFormats.text)&&e.getTextAsync().done(function(e){var t=roamingSettings.values.historyEventsCount,i=roamingSettings.values[t];if(e!=i.value)if(" "==e||""==e)$("#clipboard-icon").addClass("cleared"),$("section#history .item").removeClass("active");else{licenseInformation.productLicenses[1].isActive||$("#more-arrow").show(),t++,t>0&&$("section#history .item#no-events").fadeOut(250,function(){$("section#history .item#no-events").remove()});var s=new Windows.Storage.ApplicationDataCompositeValue,n=getDate(!1);if(s.date=n,s.value=e,roamingSettings.values[t]=s,t>maxHistoryEvents){var o=roamingSettings.values.historyEventsMin;t>maxHistoryEventsPro&&roamingSettings.values.remove(o),o=t-maxHistoryEvents,$("section#history .item:not(#history-full, #no-items)").last().remove(),licenseInformation.productLicenses[1].isActive&&!$("section#history .item#history-full").length&&$("section#history").append('<div class="item" id="history-full"><p class="large">We cannot find older copies :-(</p></div>')}$("section#history .item:first-child").removeClass("active"),setTimeout(function(){if($("section#history").prepend('<div class="item active" id='+t+'><p class="time">'+s.date+'</p><p class="large">'+s.value+"</p></div>"),i=$("section#history .item#"+t+" p.large"),i.html().length>300){var e=i.text();e=e.substr(0,300)+"...",i.text(e)}$("#clipboard-icon").removeClass("shaking cleared"),roamingSettings.values.historyEventsCount=t,roamingSettings.values.historyEventsMin=o,$("section#history p.large").click(function(){copyClipboard($(this).closest("div").prop("id")),showMessage("copied")})},100)}else $("section#history .item:first-child").addClass("active")})}}function pingClipboard(){window.setInterval(function(){trackHistory()},1e3)}window.jQuery&&!function(){"use strict";(localSettings.values.listening=!0)&&(pingClipboard(),$("section#run").addClass("hide hidden"),$("#layout-wrapper").removeClass("down"))}();